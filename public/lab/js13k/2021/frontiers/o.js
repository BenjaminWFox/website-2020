!function(t){var n={};function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=n,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"A",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.A)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)i.d(e,o,function(n){return t[n]}.bind(null,o));return e},i.n=function(t){var n=t&&t.A?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="./",i(i.s=0)}({0:function(t,n,i){t.exports=i("tjUo")},FRuT:function(t,n,i){"use strict";i.r(n);var e=i("JPst"),o=i.n(e),r=i("HeW1"),a=i.n(r),c=i("IQ3S"),d=i("yUoc"),s=i("kHjT"),u=i("Z3t/"),A=i("yLhY"),f=i("J6C/"),l=o()(!1),p=a()(c.a),h=a()(d.a),b=a()(s.a),g=a()(u.a),v=a()(A.a),m=a()(f.a);l.push([t.i,"*,*::before,*::after{box-sizing:border-box}body{background-color:#fff;margin:0;padding:0 10px}@keyframes gl{from{box-shadow:0 0 4px -4px #128814}to{box-shadow:0 0 4px 4px #128814}}.a{position:absolute}.ib{display:inline-block}.wrapper{transition:opacity 4s;position:relative;opacity:1 !important}.wrapper div,.wrapper img{image-rendering:pixelated;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges}.wrapper #game{transition:opacity .25s;opacity:1;position:relative;z-index:2}.space{transition:opacity .5s;background-color:#000;overflow:hidden;position:absolute;height:100vh;width:100%;z-index:1}.wrapper.end #game{opacity:0}.end>.space{opacity:1 !important}.space img,.ld img,.ldbg img{width:100%;height:100%}.shuttle{position:absolute;transition:top 7s;top:110vh;left:350px;width:100px}.ld{position:absolute;transition:top 11s;top:-200vh;left:140px;width:50px}.ldbg{position:absolute;left:40px;width:52px;height:52px;top:0px;z-index:19}.end .shuttle{top:-50vh}.end .ld{top:110vh}.bg{width:100%;height:100%}.px{image-rendering:pixelated;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges}.villager{z-index:500}.rW{display:flex;justify-content:space-between;margin-top:2%}.region{border:2px solid #000;height:70px;position:relative;overflow:hidden}.b{z-index:10;width:100%;position:absolute;transition:background-color 1s}.b.variant{z-index:15}.full{z-index:20;top:0;bottom:0}.st{background-color:skyblue}.two .st{background-color:#b0c4de}.adv .st{background-color:#789}.gb{background-color:#228b22}.two .gb{background-color:#deb887}.adv .gb{background-color:gray}.b.st{top:0px;height:45px}.b.gb{top:44px;height:22px}.aC{margin:0 10px}.aB{background:none;border-radius:50px;border:2px #000 solid;width:50px;height:35px;text-align:center;padding:0;margin:0;font-size:1.125rem;line-height:1.125rem;text-shadow:1px 1px #ccc;cursor:pointer}.aB:active{box-shadow:0px 0px 8px #ccc}.matW{display:flex;flex-direction:row;justify-content:space-around;text-align:center}.matW div{display:flex;flex-direction:column;align-items:center;margin:0px 0px 5px}.mat{width:18px;height:24px}.mat+span{margin-top:5px;font-weight:bold}#mBs{position:relative}.mB{background-color:#fff;border:1px #000 solid;padding:5px;margin-bottom:5px;clear:both;display:block;cursor:pointer;width:100%;position:relative;opacity:1;transition:opacity .5s}.mB:enabled{box-shadow:inset 0 0 2px 1px #128814}.mB:disabled{opacity:.75}.aB:hover,.mB:hover,.mB:active{background-color:#eee}.mB.hidden{opacity:0;position:absolute;width:100%}.costs{margin-top:5px}.cost{margin:0 10px}.l,.tr1,.tr2{position:absolute;z-index:20}.l{transition:opacity 1s,background-image 1s,top 1s;width:54px;height:49px;background-image:url("+p+");background-size:contain}.adv .l{background-image:url("+h+")}.p1 .hs1,.p2 .hs2,.p3 .hs3,.p4 .hs4,.p5 .hs5,.p6 .hs6{opacity:1 !important}.tr1{background-image:url("+b+");transition:opacity 1s;width:33px;height:36px;top:20px}.tr2{background-image:url("+g+");transition:opacity 1s;width:25px;height:44px;top:3px}.adv .tr1,.adv .tr2,.adv .wa{filter:brightness(40%)}.trtmp{opacity:1}.clr .trtmp{opacity:0}.t30{left:190px;z-index:21}.t31{left:260px;z-index:19}.t32{left:390px;top:10px;z-index:19}.t33{left:78px;top:10px;z-index:21}.t34{left:525px;top:12px;z-index:19}.t35{left:460px;top:13px;z-index:21}.t37{left:135px;top:5px;z-index:19}.t21{left:100px;top:31px;z-index:600}.t41{left:233px;top:14px}.t42{left:150px}.t43{left:74px;z-index:21}.t44{left:63px;top:9px}.t45{left:27px;top:12px}.rv{position:absolute;width:31px;height:22px;bottom:0px;z-index:20}.wa,.br{width:100%;height:100%}.wa{position:inherit;background-image:url("+v+")}.br{transition:opacity 1s;position:inherit;background-image:url("+m+");opacity:0}.brg .br{opacity:1}.rv1{left:35px}.rv2{left:95px}.rv3{left:165px}.rv4{left:185px}.rv5{left:205px}.cr,.rk,.lb{width:9px;height:12px}.cr.x2,.rk.x2,.lb.x2{width:18px;height:24px}.rk.x3{width:27px;height:36px}",""]),n.default=l},HeW1:function(t,n,i){"use strict";t.exports=function(t,n){return n||(n={}),"string"!=typeof(t=t&&t.A?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),n.hash&&(t+=n.hash),/["'() \t\n]/.test(t)||n.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},IQ3S:function(t,n,i){"use strict";n.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAZCAYAAADAHFVeAAAAZklEQVR4AWL4//8/ybg2zvQ/oF06wAAAhGIAev9bRyjwmadKNAbI6zN5R1AvgAQp6BCADgHoEIAAOegQgA4B6BCADgHoEIAOAQiQ9yg2B7Ivw3gDCwaxFqsSY/UPP4aYD8Qv89zEGp0nktAO28UBAAAAAElFTkSuQmCC"},"J6C/":function(t,n,i){"use strict";n.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAWAQMAAAACb9WyAAAABlBMVEX///95TifFEldBAAAAAXRSTlMAQObYZgAAABdJREFUeAFjoAmw////B4T4////PwQBANgfElzezHk2AAAAAElFTkSuQmCC"},JPst:function(t,n,i){"use strict";t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var i=function(t,n){var i=t[1]||"",e=t[3];if(!e)return i;if(n&&"function"==typeof btoa){var o=(a=e,c=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),d="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(d," */")),r=e.sources.map((function(t){return"/*# sourceURL=".concat(e.sourceRoot||"").concat(t," */")}));return[i].concat(r).concat([o]).join("\n")}var a,c,d;return[i].join("\n")}(n,t);return n[2]?"@media ".concat(n[2]," {").concat(i,"}"):i})).join("")},n.i=function(t,i,e){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(e)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(o[a]=!0)}for(var c=0;c<t.length;c++){var d=[].concat(t[c]);e&&o[d[0]]||(i&&(d[2]?d[2]="".concat(i," and ").concat(d[2]):d[2]=i),n.push(d))}},n}},LboF:function(t,n,i){"use strict";var e,o=function(){return void 0===e&&(e=Boolean(window&&document&&document.all&&!window.atob)),e},r=function(){var t={};return function(n){if(void 0===t[n]){var i=document.querySelector(n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[n]=i}return t[n]}}(),a=[];function c(t){for(var n=-1,i=0;i<a.length;i++)if(a[i].identifier===t){n=i;break}return n}function d(t,n){for(var i={},e=[],o=0;o<t.length;o++){var r=t[o],d=n.base?r[0]+n.base:r[0],s=i[d]||0,u="".concat(d," ").concat(s);i[d]=s+1;var A=c(u),f={css:r[1],media:r[2],sourceMap:r[3]};-1!==A?(a[A].references++,a[A].updater(f)):a.push({identifier:u,updater:b(f,n),references:1}),e.push(u)}return e}function s(t){var n=document.createElement("style"),e=t.attributes||{};if(void 0===e.nonce){var o=i.nc;o&&(e.nonce=o)}if(Object.keys(e).forEach((function(t){n.setAttribute(t,e[t])})),"function"==typeof t.insert)t.insert(n);else{var a=r(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}return n}var u,A=(u=[],function(t,n){return u[t]=n,u.filter(Boolean).join("\n")});function f(t,n,i,e){var o=i?"":e.media?"@media ".concat(e.media," {").concat(e.css,"}"):e.css;if(t.styleSheet)t.styleSheet.cssText=A(n,o);else{var r=document.createTextNode(o),a=t.childNodes;a[n]&&t.removeChild(a[n]),a.length?t.insertBefore(r,a[n]):t.appendChild(r)}}function l(t,n,i){var e=i.css,o=i.media,r=i.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),r&&btoa&&(e+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}var p=null,h=0;function b(t,n){var i,e,o;if(n.singleton){var r=h++;i=p||(p=s(n)),e=f.bind(null,i,r,!1),o=f.bind(null,i,r,!0)}else i=s(n),e=l.bind(null,i,n),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else o()}}t.exports=function(t,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=o());var i=d(t=t||[],n);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var e=0;e<i.length;e++){var o=c(i[e]);a[o].references--}for(var r=d(t,n),s=0;s<i.length;s++){var u=c(i[s]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}i=r}}}},"Z3t/":function(t,n,i){"use strict";n.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAsCAMAAACngONPAAAACVBMVEX///8RiBZePxaIFxekAAAAAXRSTlMAQObYZgAAAE1JREFUeNrVyUEKwCAQwMBm///oIlJchIiLXppbmCcF+XaFqnBTWAtFMeJAUAAXNoWbgglTRwJCLpiAEUoYuYDRKFpj/y7Rq0h8CSR6AbNkAg2IiRgCAAAAAElFTkSuQmCC"},kHjT:function(t,n,i){"use strict";n.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAkCAMAAAAw96PuAAAACVBMVEX///8AoQhePxY8iqtDAAAAAXRSTlMAQObYZgAAAFdJREFUeNrt0TEOwDAIQ1Gb+x+6lYrkDIndLJnyR3gLAoodFnHMAGNoCRclIENXFvwlGDojeETkcxHJ/mNq/v9RlAyUZvUGaK0afMJ0xbaoCqS6LNx+Zh7TGwLlNR23RgAAAABJRU5ErkJggg=="},"q+Kr":function(t,n,i){var e=i("LboF"),o=i("FRuT");"string"==typeof(o=o.A?o.default:o)&&(o=[[t.i,o,""]]);var r={insert:"head",singleton:!1};e(o,r);t.exports=o.locals||{}},tjUo:function(t,n,i){"use strict";i.r(n);i("q+Kr");function e(t,n){return Math.floor(Math.random()*(n-t+1)+t)}function o(t){return Math.floor(Math.random()*(t[1]-t[0]+1)+t[0])}function r(t,n,i,e){t.regions[t.region].removeChild(t.canvas),t.regions[n].appendChild(t.canvas),t.setRegion(n),t.setPos(i),e&&("l"===t.faceDir?t.setFaceDir("r"):t.setFaceDir("l"))}var a={hasTraveled:!1},c=function(){a.moveMod=1,a.workMod=0,a.workSpeed=250,a.resourceMod=0,a.travelRight=.7,a.travelLeft=.7,a.home=1,a.farm=1,a.mine=1,a.labs=1,a.bridged=!1,a.upgraded=!1};c();var d=["#2cc342","#6ad7eb","#83766b","#231202"],s=[{skin:"#fdf6ec",eye:d[e(0,d.length-1)],mouth:"#cd6550"},{skin:"#ffe8ca",eye:d[e(0,d.length-1)],mouth:"#cd6550"},{skin:"#ffdaa9",eye:d[e(0,d.length-1)],mouth:"#cd6550"},{skin:"#d3a363",eye:d[e(0,d.length-1)],mouth:"#cd6550"},{skin:"#b57a2b",eye:d[e(0,d.length-1)],mouth:"#f5beb3"},{skin:"#764505",eye:d[e(0,d.length-1)],mouth:"#f5beb3"},{skin:"#512f01",eye:d[e(0,d.length-1)],mouth:"#f5beb3"},{skin:"#331e02",eye:d[e(0,d.length-1)],mouth:"#f5beb3"}],u=[{main:"#cd7944",second:"#d59770"},{main:"#d07373",second:"#e09999"},{main:"#b16bcb",second:"#c99ed9"},{main:"#d073a3",second:"#da9bbb"}],A=["#446bcd","#6bc3cb","#d0cb73","#77cb6b"],f=["#66201b","#996f03","#737373","#030716"],l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"d",n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,e=document.createElement("canvas"),o=e.getContext("2d");switch(e.width=44,e.height=44,t){default:case"d":o.fillStyle=i.second,o.fillRect(20,21,4,11),o.fillStyle=n.skin,o.fillRect(20,32,4,3),o.fillRect(24,32,1,1);break;case"f":o.fillStyle=i.second,o.fillRect(21,21,11,4),o.fillStyle=n.skin,o.fillRect(32,21,3,4),o.fillRect(32,20,1,1);break;case"u":o.fillStyle=i.second,o.fillRect(20,10,4,11),o.fillStyle=n.skin,o.fillRect(20,7,4,3),o.fillRect(19,9,1,1)}return e},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"d",n=document.createElement("canvas"),i=n.getContext("2d");switch(n.width=44,n.height=44,t){default:case"d":i.fillStyle="#3c2601",i.fillRect(24,33,11,2),i.fillRect(19,33,1,2),i.fillStyle="#767676",i.fillRect(35,27,1,14),i.fillRect(36,28,1,12);break;case"f":i.fillStyle="#3c2601",i.fillRect(33,9,2,11),i.fillRect(33,25,2,1),i.fillStyle="#767676",i.fillRect(28,7,12,1),i.fillRect(27,8,14,1);break;case"u":i.fillStyle="#3c2601",i.fillRect(9,7,11,2),i.fillRect(24,7,1,2),i.fillStyle="#767676",i.fillRect(7,2,1,12),i.fillRect(8,1,1,14)}return n},h=function(t){var n=document.createElement("canvas"),i=n.getContext("2d");switch(n.width=44,n.height=44,t){default:case"d":i.fillStyle="#3c2601",i.fillRect(24,33,16,2),i.fillRect(19,33,1,2),i.fillStyle="#767676",i.fillRect(40,33,2,6);break;case"f":i.fillStyle="#3c2601",i.fillRect(33,5,2,16),i.fillRect(33,25,2,1),i.fillStyle="#767676",i.fillRect(33,3,6,2);break;case"u":i.fillStyle="#3c2601",i.fillRect(4,7,16,2),i.fillRect(24,7,1,2),i.fillStyle="#767676",i.fillRect(2,4,2,5)}return n};function b(){var t=this;this.canvas=document.createElement("canvas"),this.canvas.classList.add("villager"),this.canvas.style.transition="bottom .15s",this.canvas.style.position="absolute",this.canvas.style.bottom="2px",this.canvas.width=44,this.canvas.height=44,this.context=this.canvas.getContext("2d"),this.skintone=s[e(0,s.length-1)],this.tTone=u[e(0,u.length-1)],this.bTone=A[e(0,A.length-1)],this.hTone=f[e(0,f.length-1)],this.armPos="d",this.faceDir="r",this.body,this.arms,this.feet,this.pick,this.hoe,this.crouching=!1,this.walking=!1,this.jumping=!1,this.working=!1,this.dropping=!1,this.lastStep=0,this.lastStepTime=0,this.jumpTime=0,this.workTime=0,this.timesWorked=0,this.pos=0,this.job="idle",this.task="idle",this.region="home",this.coords,this.regions,this.destCoords,this.carrying="",this.draw=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.context.clearRect(0,0,t.canvas.width,t.canvas.height),t.context.drawImage(t.body,0,0),t.context.drawImage(t.arms[t.armPos],0,0),n?t.context.drawImage(t[n][t.armPos],0,0):"mine"===t.job?t.context.drawImage(t.pick[t.armPos],0,0):"farm"===t.job&&t.context.drawImage(t.hoe[t.armPos],0,0),t.carrying&&t.context.drawImage(t.resourceImages[t.carrying],17,0),t.drawFeet()},this.drawFeet=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=20-n;t.context.clearRect(18,40,9,4),t.crouching?t.context.drawImage(t.feet,i,38):t.context.drawImage(t.feet,i,40)},this.init=function(n,i,o,r){var a,c,d,s,u,A,f,b,g;t.coords=n,t.regions=i,t.regions.home.appendChild(t.canvas),t.addResource=o,t.resourceImages=r,t.body=(a=t.skintone,c=t.tTone,d=t.bTone,s=t.hTone,u=document.createElement("canvas"),A=u.getContext("2d"),f=e(0,1),b=e(0,1),g=e(0,2),A.fillStyle=a.skin,A.fillRect(18,11,8,8),A.fillStyle=c.main,A.fillRect(18-f,19,8+2*f,12),b&&A.fillRect(26+f,21,1,5),g&&(A.fillStyle=s,A.beginPath(),A.moveTo(18,11),A.lineTo(24,11),A.lineTo(18,17),A.fill()),1===g&&(A.fillRect(19,10,5,1),A.fillRect(17,12,1,7)),2===g&&A.fillRect(16,11,2,13),A.fillStyle=d,A.fillRect(18,31,8,9),A.fillStyle=a.eye,A.fillRect(23,13,2,2),A.fillStyle="#ffffff",A.fillRect(24,14,1,1),A.fillStyle=a.mouth,A.fillRect(24,17,2,1),u),t.feet=function(){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=6,t.height=4,n.fillStyle="#000000",n.fillRect(0,0,4,4),n.fillRect(4,3,2,2),t}(),t.arms={u:l("u",t.skintone,t.tTone),f:l("f",t.skintone,t.tTone),d:l("d",t.skintone,t.tTone),b:l("b",t.skintone,t.tTone)},t.pick={u:p("u"),f:p("f"),d:p("d"),b:p("b")},t.hoe={u:h("u"),f:h("f"),d:h("d"),b:h("b")},t.setPos(0),t.draw()},this.update=function(n){if(t.jumping?t.doJump(n):"idle"===t.task&&"idle"===t.job&&t.jump(),t.walking){var i="r"===t.faceDir?1:-1;t.setPos(t.pos+2*a.moveMod*a[t.region]*i),t.lastStepTime+100<n&&("f"===t.lastStepPos?(t.drawFeet(-1),t.lastStepPos="b"):(t.drawFeet(1),t.lastStepPos="f"),t.lastStepTime=n),function(t){switch(t.region){case"home":"l"===t.faceDir&&t.pos<0-t.canvas.width&&r(t,"travelLeft",t.pos,!0),"r"===t.faceDir&&t.pos>t.coords.homeBounds[1]&&r(t,"travelRight",t.coords.travelBounds[1],!0);break;case"travelLeft":"l"===t.faceDir&&t.pos<0-t.canvas.width&&r(t,"home",t.coords.homeBounds[0]-t.canvas.width,!0),"r"===t.faceDir&&t.pos>t.coords.travelBounds[1]&&("farm"===t.job&&r(t,"farm",t.coords.jobBounds[1],!0),"mine"===t.job&&r(t,"mine",t.coords.jobBounds[0]-t.canvas.width,!1),"labs"===t.job&&r(t,"labs",t.coords.jobBounds[0]-t.canvas.width,!1),"idle"===t.job&&r(t,"home",t.coords.homeBounds[0]-t.canvas.width,!1));break;case"travelRight":"l"===t.faceDir&&t.pos<0-t.canvas.width&&("farm"===t.job&&r(t,"farm",t.coords.jobBounds[1],!1),"mine"===t.job&&r(t,"mine",t.coords.jobBounds[1],!1),"labs"===t.job&&r(t,"labs",t.coords.jobBounds[0]-t.canvas.width,!0),"idle"===t.job&&r(t,"home",t.coords.homeBounds[1],!1)),"r"===t.faceDir&&t.pos>t.coords.travelBounds[1]&&r(t,"home",t.coords.homeBounds[1],!0);break;case"farm":"l"===t.faceDir&&t.pos<0-t.canvas.width&&r(t,"travelLeft",t.coords.travelBounds[1],!1),"r"===t.faceDir&&(t.pos,t.coords.jobBounds[1]);break;case"mine":"l"===t.faceDir&&t.pos<0-t.canvas.width&&r(t,"travelLeft",t.coords.travelBounds[1],!1),"r"===t.faceDir&&t.pos>t.coords.jobBounds[1]&&r(t,"travelRight",t.coords.travelBounds[0]-t.canvas.width,!1);break;case"labs":"l"===t.faceDir&&(t.pos,t.canvas.width),"r"===t.faceDir&&t.pos>t.coords.jobBounds[1]&&r(t,"travelRight",t.coords.travelBounds[0]-t.canvas.width,!1)}"idle"===t.job||"drop"===t.task||"farm"!==t.region&&"mine"!==t.region&&"labs"!==t.region||("l"===t.faceDir?t.pos+.5*t.canvas.width<t.destCoords&&t.doWork():"r"===t.faceDir&&t.pos+.5*t.canvas.width>t.destCoords&&t.doWork()),"drop"!==t.task&&"idle"!==t.task||"home"!==t.region||("l"===t.faceDir?t.pos+.5*t.canvas.width<t.destCoords&&("drop"===t.task&&t.doDrop(),"idle"===t.job&&t.setWalking(!1)):"r"===t.faceDir&&t.pos+.5*t.canvas.width>t.destCoords&&("drop"===t.task&&t.doDrop(),"idle"===t.job&&t.setWalking(!1)))}(t)}if(t.working)if(t.timesWorked>5)t.working=!1,t.walking=!0,t.dropping=!0,t.task="drop",t.destCoords=o(t.coords.drop),t.setArms("d"),t.carrying="idle"===t.job?"":t.job,t.draw(),t.timesWorked=0;else if(t.workTime+(a.workSpeed-a.workMod)<n){var e=!(t.timesWorked%2);switch(t.job){case"mine":e?(t.setArms("u"),t.draw()):(t.setArms("f"),t.draw());break;case"farm":e?(t.setArms("f"),t.draw()):(t.setArms("d"),t.draw());break;case"labs":e?(t.setArms("u"),t.draw()):(t.setArms("f"),t.draw())}t.timesWorked+=1,t.workTime=n}},this.jump=function(){t.jumping=!0,t.jumpTime=0},this.setPos=function(n){t.pos=n,t.canvas.style.left="".concat(n,"px")},this.setRegion=function(n){t.region=n},this.setArms=function(n){t.armPos=n,t.draw()},this.setWalking=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.walking=n,t.lastStepTime=0,t.lastStepPos="f",n||t.drawFeet()},this.setJob=function(n){t.job=n,"idle"===n&&"drop"!==t.task?(t.destCoords=o(t.coords.homeBounds),t.task="idle"):"idle"!==n&&"drop"!==t.task&&(t.task="work",t.destCoords=o(t.coords.job)),t.walking=!0,t.draw()},this.setFaceDir=function(n){"r"===n?(t.canvas.style.transform="rotateY(0deg)",t.faceDir="r"):"l"===n&&(t.canvas.style.transform="rotateY(180deg)",t.faceDir="l")},this.doJump=function(n){0===t.jumpTime?(t.canvas.style.bottom="0px",t.crouching=!0,t.draw(),t.jumpTime=n):t.jumpTime+300<n?(t.canvas.style.bottom="2px",t.jumping=!1):t.jumpTime+150<n&&(t.crouching=!1,t.draw(),t.canvas.style.bottom="10px")},this.doWork=function(){t.walking=!1,t.working=!0,t.timesWorked=0,t.workTime=0},this.doDrop=function(){t.addResource(t.carrying),t.carrying="",t.jump(),"idle"!==t.job?(t.destCoords=o(t.coords.job),t.task="work"):t.task="idle"}}var g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAMAAACHgmeRAAAAElBMVEX////23ADWvwAAeAMAgwPMtgB/RgJqAAAAAXRSTlMAQObYZgAAADRJREFUeNpFyYkJADAIBEG/9N9y7jFEEIc1OIk1Kh/MjiJxe9SGOiQELvy2fusBIEY9RZULI2AAr+IwpAcAAAAASUVORK5CYII=",v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAIAAAA/PgD0AAAABnRSTlMA/wD/AP83WBt9AAAASklEQVR4AW3NgQnAMBBCUZd0EyfqotcQqRzSTwDCkwSzkkQyV2xoKzhJasMz5/wYb7HLsVSmL67azAOYUQ/azJnAP3EFQ8zFuixe0pa0rzND9iYAAAAASUVORK5CYII=",m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMAgMAAADNMn8wAAAADFBMVEX///9P0dyR9v/L+//XiBmYAAAAAXRSTlMAQObYZgAAACJJREFUeAFjYHvCwMB4ASsGy0n/ZGDI/+fAkLXKgUE0lAEAAMALOgQp1SMAAAAASUVORK5CYII=";function x(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],e=!0,o=!1,r=void 0;try{for(var a,c=t[Symbol.iterator]();!(e=(a=c.next()).done)&&(i.push(a.value),!n||i.length!==n);e=!0);}catch(t){o=!0,r=t}finally{try{e||null==c.return||c.return()}finally{if(o)throw r}}return i}(t,n)||y(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,n){if(t){if("string"==typeof t)return k(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?k(t,n):void 0}}function k(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,e=new Array(n);i<n;i++)e[i]=t[i];return e}var M,R,B,E,C,S,U,I,O,z,F,N,Q,T=document.getElementById.bind(document),V=document.querySelector.bind(document),j=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var e=J.createBufferSource(),o=J.createBuffer(n.length,n[0].length,D);return n.map((function(t,n){return o.getChannelData(n).set(t)})),e.buffer=o,e.connect(J.destination),e.start(),e},Y=function(){var t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:220,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,A=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,l=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,b=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,v=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,m=arguments.length>17&&void 0!==arguments[17]?arguments[17]:1,x=arguments.length>18&&void 0!==arguments[18]?arguments[18]:0,w=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0,y=2*Math.PI,k=u*=500*y/Math.pow(D,2),M=(0<b?1:-1)*y/4,R=o*=(1+2*e*Math.random()-e)*y/D,B=[],E=0,C=0,S=0,U=1,I=0,O=0,z=0;for(r=99+D*r,x*=D,a*=D,c*=D,v*=D,A*=500*y/Math.pow(D,3),b*=y/D,f*=y/D,l*=D,p=D*p|0,n=r+x+a+c+v|0;S<n;B[S++]=z)++O%(100*g|0)||(z=d?1<d?2<d?3<d?Math.sin(Math.pow(E%y,3)):Math.max(Math.min(Math.tan(E),1),-1):1-(2*E/y%2+2)%2:1-4*Math.abs(Math.round(E/y)-E/y):Math.sin(E),z=(p?1-w+w*Math.sin(2*Math.PI*S/p):1)*(0<z?1:-1)*Math.pow(Math.abs(z),s)*i*L*(S<r?S/r:S<r+x?1-(S-r)/x*(1-m):S<r+x+a?m:S<n-v?(n-S-v)/c*m:0),z=v?z/2+(v>S?0:(S<n-v?1:(n-S)/v)*B[S-v|0]/2):z),E+=(t=(o+=u+=A)*Math.sin(C*b-M))-t*h*(1-1e9*(Math.sin(S)+1)%2),C+=t-t*h*(1-1e9*(Math.pow(Math.sin(S),2)+1)%2),U&&++U>l&&(o+=f,R+=f,U=0),!p||++I%p||(o=R,u=k,U=U||1);return B},L=.1,D=44100,J=new(window.AudioContext||webkitAudioContext),K=function(t,n,i){for(var e,o,r,a,c,d,s,u,A,f,l,p,h,b,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:125,v=0,m=[],x=[],y=[],k=0,M=0,R=1,B={},E=D/g*60>>2;R;k++)m=[R=u=p=0],i.map((function(g,C){for(s=n[g][k]||[0,0,0],R|=!!n[g][k],b=p+(n[g][0].length-2-!u)*E,h=C==i.length-1,o=2,a=p;o<s.length+h;u=++o){for(c=s[o],A=o==s.length+h-1&&h||f!=(s[0]||0)|c|0,r=0;r<E&&u;r++>E-99&&A?l+=(l<1)/99:0)d=(1-l)*m[v++]/2||0,x[a]=(x[a]||0)-d*M+d,y[a]=(y[a++]||0)+d*M+d;c&&(l=c%1,M=s[1]||0,(c|=0)&&(m=B[[f=s[v=0]||0,c]]=B[[f,c]]||((e=w(t[f]))[2]*=Math.pow(2,(c-12)/12),c>0?Y.apply(void 0,w(e)):[])))}p=b}));return[x,y]},G=[[[,0,740,,,.15,2,.2,-.1,-.15,9,.02,,.1,.12,,.06],[3,0,43,,,.25,,,,,,,,2],[,0,219,,,,,1.1,,-.1,-50,-.05,-.01,1],[.8,0,2100,,,.2,3,3,,,-400,,,2]],[[[,,1,,,,1,5,8,,,,,,5,10,,,10,10,,,10,6,8,,,,,,10,,10,,8,8,,5,3,,1,5,5,,,,12,13,13,,10,10,,5,,,8,3,,,,6,6,,5,3],[,,5,,,,5,8,13,,,,,,6,13,,,15,13,,,13,10,8,,,,,,17,,17,,15,15,,13,10,,1,13,15,,,,15,5,3,,1,1,,,,,3,8,,,,5,5,,1,3],[,,1,,,,1,5,8,,,,,,5,10,,,10,10,,,10,6,8,,,,,,10,,10,,8,8,,5,3,,1,5,5,,,,12,13,13,,10,10,,5,,,8,3,,,,6,6,,5,3],[,,,,32,29,,,,,,,30,27,,,,,,,,,,,,,,30,27,29,,,,,,,,25,29,27,,,,,,,,,,,,,,,,,,,32,29,32,,,,,,],[1,,13,,,,,,,,20,10,,,,,,,13,,,,,,,,25,12,,,,,,,13,,,,,,,,20,10,,,,,,,13,,,,,,,,25,12,,,,,,,],[2,,,,,,,,,,,,20,,,13,,,,,,,1,,,,,,25,,,20,,,,,,,,,,,,,20,,,13,,,,,,,,,,,,,25,,,20,,,],[3,,,,,,,,,,,,13,,13,10,,,,,,,,,,,,,20,,20,5,,,,,,,,,,,,,13,,13,10,,,,,,,,,,,,,20,,20,5,,,]]],[0],104,{title:"HorizonsV1",instruments:["Flute","Bass Drum 2","Snare 2","Hihat Open"],patterns:["Pattern 0"]}],P=0,W=0,H=0,X=[],Z={farm:new Image,mine:new Image,labs:new Image},q={spawn:[100,400],drop:[260,290],job:[60,116],homeBounds:[0,520],travelBounds:[0,270],jobBounds:[0,176]},$={home:"",travelLeft:"",travelRight:"",farm:"",mine:"",labs:""},_=function(t,n,i){var e=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!1},r=i.f,a=void 0===r?0:r,c=i.m,d=void 0===c?0:c,s=i.l,u=void 0===s?0:s;this.pay=function(){return!(N.farm<e.cost.f||N.mine<e.cost.m||N.labs<e.cost.l)&&(N.farm-=e.cost.f,N.mine-=e.cost.m,N.labs-=e.cost.l,nt(),n(),et(),!0)},this.el=rt(t,this.pay,i),this.el.style.display="none",this.cost={f:a,m:d,l:u},this.label=t,this.fn=n,this.checkEnabled=function(){return N.farm<e.cost.f||N.mine<e.cost.m||N.labs<e.cost.l?(e.el.disabled=!0,!1):(e.el.disabled=!1,!0)},this.checkDisplay=function(){o()?e.el.style.display="block":e.el.style.display="none"},this.checkEnabled(),this.checkDisplay()},tt=function(){var t=V(".wrapper");Q.colonize.el.classList.add("hidden"),t.classList.add("end"),M.playbackRate.value=1,a.hasTraveled=!0,setTimeout((function(){z.forEach((function(t){t.canvas.parentNode.removeChild(t.canvas)})),X.forEach((function(t){t.el.parentNode.removeChild(t.el)})),t.classList.remove("end"),t.classList.remove("adv"),$.travelLeft.classList.remove("clr"),$.travelRight.classList.remove("brg"),T("hR").classList.remove("p1","p2","p3","p4","p5","p6"),ut(),ft()}),9e3)},nt=function(){S.innerHTML=N.farm,U.innerHTML=N.mine,I.innerHTML=N.labs,et()},it=function(){Q.recruit.cost.f=Math.round(1.2*Q.recruit.cost.f),Q.recruit.el.querySelector(".fCost").innerHTML=": ".concat(Q.recruit.cost.f),nt(),At()},et=function(){X.forEach((function(t){t.checkEnabled(),t.checkDisplay()}))},ot=function(t){N[t]+=10+a.resourceMod,nt(),et()},rt=function(t,n,i){var e=i.f,o=void 0===e?0:e,r=i.m,a=void 0===r?0:r,c=i.l,d=void 0===c?0:c,s=document.createElement("button"),u=document.createElement("div"),A=document.createElement("span");if(s.addEventListener("click",n),s.classList.add("mB"),s.innerHTML=t,u.classList.add("costs"),s.appendChild(u),A.classList.add("cost"),o){var f=A.cloneNode();f.innerHTML='<div class="ib cr"></div><span class="fCost">: '.concat(o,"</span>"),u.appendChild(f)}if(a){var l=A.cloneNode();l.innerHTML='<div class="ib rk"></div><span class="mCost">: '.concat(a,"</span>"),u.appendChild(l)}if(d){var p=A.cloneNode();p.innerHTML='<div class="ib lb"></div><span class="lCost">: '.concat(d,"</span>"),u.appendChild(p)}return s},at=function(){return R.innerHTML="".concat(F.farm.length+F.mine.length+F.labs.length," / ").concat(z.length," working")},ct=function(){B.innerHTML=F.farm.length,E.innerHTML=F.mine.length,C.innerHTML=F.labs.length},dt=function(t){var n=x(t.target.id.split("-"),2),i=n[0];switch(n[1]){case"add":if(F.idle.length){var e=F.idle.shift(),r=o(q.job);e.setJob(i,r),F[i].push(e)}break;case"sub":if(F[i].length){var a=F[i].shift();a.setJob("idle"),F.idle.push(a)}}ct(),at()},st=function(){var t;z=[],F={idle:[],farm:[],mine:[],labs:[]},N={farm:0,mine:0,labs:0},t=a.hasTraveled?"'Make' Villager - They grow up so fast!":"Recruit Villager - Do More with More!",Q={recruit:new _(t,it,{f:20},(function(){return!0})),bridge:new _("Bridge Rivers - Faster River Travel!",(function(){a.travelRight=1,Q.bridge.el.classList.add("hidden"),$.travelRight.classList.add("brg")}),{m:20,l:20},(function(){return z.length>=3})),clear:new _("Clear Forests - Faster Forest Travel!",(function(){a.travelLeft=1,Q.clear.el.classList.add("hidden"),$.travelLeft.classList.add("clr")}),{f:20,l:20},(function(){return z.length>=3})),nutrition:new _("Nutrition & Fitness - Move Faster!",(function(){a.moveMod+=.5,M.playbackRate.value+=.05,Q.nutrition.el.classList.add("hidden")}),{f:20,l:40},(function(){return z.length>=4})),tools:new _("Lighter, Stronger Tools - Work Faster!",(function(){a.workMod+=100,M.playbackRate.value+=.05,Q.tools.el.classList.add("hidden")}),{m:30,l:30},(function(){return z.length>=6})),backpacks:new _("Ergonomic Backpacks - Carry More!",(function(){a.resourceMod+=5,Q.backpacks.el.classList.add("hidden")}),{m:30,l:60},(function(){return z.length>=8})),propaganda:new _("Motivational Propaganda - Be Better, Comrade!",(function(){a.moveMod+=.5,a.workMod+=50,M.playbackRate.value+=.05,Q.propaganda.el.classList.add("hidden")}),{f:50,l:100},(function(){return z.length>=10})),upgrade:new _("Advance Society - More Efficiency! More Progress!",(function(){a.moveMod+=.5,a.workMod+=50,a.resourceMod+=5,a.upgraded=!0,M.playbackRate.value+=.05,V(".wrapper").classList.add("adv"),Q.upgrade.el.classList.add("hidden")}),{f:100,m:100,l:100},(function(){return a.moveMod>=2&&z.length>=12})),colonize:new _("Colonize New Planet - Goodbye World, Hello World!",tt,{f:200,m:200,l:200},(function(){return a.upgraded&&z.length>=14}))}},ut=function(){if(c(),st(),$.home=T("hR"),a.hasTraveled&&!T("ldbg")){var t=T("ld").cloneNode(!0);t.classList.remove("space"),t.classList.remove("ld"),t.classList.add("ldbg"),t.id="ldbg",$.home.appendChild(t)}$.travelLeft=T("tLR"),$.travelRight=T("tRR"),$.farm=T("fR"),$.mine=T("mR"),$.labs=T("lR"),B=T("fC"),E=T("mC"),C=T("lC"),S=T("fA"),U=T("mA"),I=T("lA"),R=T("working"),O=T("mBs"),a.hasTraveled||function(){for(var t=[[5,11],[240,6],[30,28,,],[225,20,,],[55,14],[200,4],[210,14],[140,4],[150,20],[74,12],[180,20],[168,18,,],[125,27,,],[40,8],[50,29,,],[100,20,,],[95,18]],n=[[300],[94],[350],[225],[480],[145],[405]],i=0;i<t.length;i++){var e=document.createElement("div");e.classList.add("tr".concat(i%2+1)),e.style.left="".concat(t[i][0],"px"),e.style.top="".concat(t[i][1],"px"),t[i].length>2&&(e.classList.add("trtmp"),e.style.zIndex=600),$.travelLeft.appendChild(e)}for(var o=0;o<n.length;o++){var r=document.createElement("div");r.classList.add("l","px","h".concat(o),"hs".concat(o)),r.style.left="".concat(n[o][0],"px"),o>0&&(r.style.opacity=0),$.home.appendChild(r)}}(),Z.farm.src=g,Z.mine.src=v,Z.labs.src=m,at(),ct(),nt(),X=[],Object.values(Q).forEach((function(t){X.push(t),O.appendChild(t.el)})),document.querySelectorAll(".aB").forEach((function(t){t.addEventListener("click",dt)}))},At=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o(q.homeBounds),n=new b;return n.init(q,$,ot,Z),n.setPos(t),n.setRegion("home"),n.setFaceDir(0===o([0,1])?"r":"l"),F.idle.push(n),z.push(n),et(),at(),z.length<25&&T("hR").classList.add("p".concat(Math.floor(z.length/2))),n},ft=function(){At(),At(),at()};function lt(t){P+1e3<t&&(P=t),W+500<t&&(W=t),H+250<t&&(H=t),z.forEach((function(n){n.update(t)})),window.requestAnimationFrame(lt)}var pt=function t(){document.removeEventListener("click",t),(M=j.apply(void 0,w(K.apply(void 0,G)))).loop=!0};window.onload=function(){document.addEventListener("click",pt);var t=document.createElement("style");t.innerHTML="\n  .cr {\n    background-image: url('".concat(g,"');\n    background-size: contain;\n  }\n  .rk {\n    background-image: url('").concat(v,"');\n    background-size: contain;\n  }\n  .lb {\n    background-image: url('").concat(m,"');\n    background-size: contain;\n  }\n  "),document.head.appendChild(t);var n=T("farm-add");n.addEventListener("click",(function t(){n.style.animation="",n.removeEventListener("click",t)})),n.style.animation="gl 1s infinite alternate",ut(),ft(),lt()}},yLhY:function(t,n,i){"use strict";n.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAWCAIAAAC3w9CmAAAABnRSTlMA/wD/AP83WBt9AAAARElEQVR4AWP4Ty5gsIEiPGBwmY4wdNR0TENdc15BEKo1I8d0woaOMNPR9IyaTtgsTIRDAd1Nx6lnxJpOtB4y0tKQNh0A6MFyVqFWEvgAAAAASUVORK5CYII="},yUoc:function(t,n,i){"use strict";n.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAAxAgMAAADsLrL2AAAACVBMVEViYmK+xQC4uLhczx/gAAAANklEQVR4AWNgEA1lCA1hYAwNYA11YMDPpSrAtIj+3FEfEQarVq1agMRt4GJQoBa3SwGdS22LANzFPKaa9phQAAAAAElFTkSuQmCC"}});