let t,e,i=()=>{},s={};function n(t,...e){(s[t]||[]).map((t=>t(...e)))}let h={get:(t,e)=>"_proxy"==e||i};function a(){return t}function o(){return e}class r{constructor({spriteSheet:t,frames:e,frameRate:i,loop:s=!0}){this.spriteSheet=t,this.frames=e,this.frameRate=i,this.loop=s;let{width:n,height:h,margin:a=0}=t.frame;this.width=n,this.height=h,this.margin=a,this._f=0,this._a=0}clone(){return new r(this)}reset(){this._f=0,this._a=0}update(t=1/60){if(this.loop||this._f!=this.frames.length-1)for(this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate}render({x:t,y:e,width:i=this.width,height:s=this.height,context:n=o()}){let h=this.frames[this._f]/this.spriteSheet._f|0,a=this.frames[this._f]%this.spriteSheet._f|0;n.drawImage(this.spriteSheet.image,a*this.width+(2*a+1)*this.margin,h*this.height+(2*h+1)*this.margin,this.width,this.height,t,e,i,s)}}function c(){return new r(...arguments)}function d(t,e,i){return Math.min(Math.max(t,i),e)}class l{constructor(t=0,e=0,i={}){this.x=t,this.y=e,i._c&&(this.clamp(i._a,i._b,i._d,i._e),this.x=t,this.y=e)}add(t){return new l(this.x+t.x,this.y+t.y,this)}subtract(t){return new l(this.x-t.x,this.y-t.y,this)}scale(t){return new l(this.x*t,this.y*t)}normalize(t=this.length()){return new l(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}clamp(t,e,i,s){this._c=!0,this._a=t,this._b=e,this._d=i,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?d(this._a,this._d,t):t}set y(t){this._y=this._c?d(this._b,this._e,t):t}}function g(){return new l(...arguments)}class u extends class{constructor(t){return this.init(t)}init(t={}){this.position=g(),this.velocity=g(),this.acceleration=g(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.acceleration;t&&(e=e.scale(t)),this.velocity=this.velocity.add(e);let i=this.velocity;t&&(i=i.scale(t)),this.position=this.position.add(i),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}{init({width:t=0,height:e=0,context:i=o(),render:s=this.draw,update:n=this.advance,children:h=[],anchor:a={x:0,y:0},opacity:r=1,rotation:c=0,scaleX:d=1,scaleY:l=1,...g}={}){this._c=[],super.init({width:t,height:e,context:i,anchor:a,opacity:r,rotation:c,scaleX:d,scaleY:l,...g}),this._di=!0,this._uw(),this.addChild(h),this._rf=s,this._uf=n}update(t){this._uf(t),this.children.map((e=>e.update&&e.update(t)))}render(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.rotation&&t.rotate(this.rotation),1==this.scaleX&&1==this.scaleY||t.scale(this.scaleX,this.scaleY);let e=-this.width*this.anchor.x,i=-this.height*this.anchor.y;(e||i)&&t.translate(e,i),this.context.globalAlpha=this.opacity,this._rf(),(e||i)&&t.translate(-e,-i),this.children.map((t=>t.render&&t.render())),t.restore()}draw(){}_pc(){this._uw(),this.children.map((t=>t._pc()))}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wo:i=1,_wr:s=0,_wsx:n=1,_wsy:h=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wo=i*this.opacity,this._wsx=n*this.scaleX,this._wsy=h*this.scaleY,this._wx=this._wx*n,this._wy=this._wy*h,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this._wr=s+this.rotation;let{x:a,y:o}=((t,e)=>{let i=Math.sin(e),s=Math.cos(e);return{x:t.x*s-t.y*i,y:t.x*i+t.y*s}})({x:this._wx,y:this._wy},s);this._wx=a,this._wy=o,this._wx+=t,this._wy+=e}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,opacity:this._wo,rotation:this._wr,scaleX:this._wsx,scaleY:this._wsy}}set children(t){this.removeChild(this._c),this.addChild(t)}get children(){return this._c}addChild(...t){t.flat().map((t=>{this.children.push(t),t.parent=this,t._pc=t._pc||i,t._pc()}))}removeChild(...t){t.flat().map((t=>{((t,e)=>{let i=t.indexOf(e);if(-1!=i)return t.splice(i,1),!0})(this.children,t)&&(t.parent=null,t._pc())}))}get opacity(){return this._opa}set opacity(t){this._opa=t,this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}class p extends u{init({image:t,width:e=(t?t.width:void 0),height:i=(t?t.height:void 0),...s}={}){super.init({image:t,width:e,height:i,...s})}get animations(){return this._a}set animations(t){let e,i;for(e in this._a={},t)this._a[e]=t[e].clone(),i=i||this._a[e];this.currentAnimation=i,this.width=this.width||i.width,this.height=this.height||i.height}playAnimation(t){this.currentAnimation=this.animations[t],this.currentAnimation.loop||this.currentAnimation.reset()}advance(t){super.advance(t),this.currentAnimation&&this.currentAnimation.update(t)}draw(){this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}let w=/(\d+)(\w+)/;class f extends u{init({text:t="",textAlign:e="",lineHeight:i=1,font:s=o().font,...n}={}){t=""+t,super.init({text:t,textAlign:e,lineHeight:i,font:s,...n}),this._p()}get width(){return this._w}set width(t){this._d=!0,this._w=t,this._fw=t}get text(){return this._t}set text(t){this._d=!0,this._t=""+t}get font(){return this._f}set font(t){this._d=!0,this._f=t,this._fs=(t=>{let e=t.match(w),i=+e[1];return{size:i,unit:e[2],computed:i}})(t).computed}get lineHeight(){return this._lh}set lineHeight(t){this._d=!0,this._lh=t}render(){this._d&&this._p(),super.render()}_p(){this._s=[],this._d=!1;let t=this.context;if(t.font=this.font,!this._s.length&&this._fw){let e=this.text.split(" "),i=0,s=2;for(;s<=e.length;s++){let n=e.slice(i,s).join(" ");t.measureText(n).width>this._fw&&(this._s.push(e.slice(i,s-1).join(" ")),i=s-1)}this._s.push(e.slice(i,s).join(" "))}if(!this._s.length&&this.text.includes("\n")){let e=0;this.text.split("\n").map((i=>{this._s.push(i),e=Math.max(e,t.measureText(i).width)})),this._w=this._fw||e}this._s.length||(this._s.push(this.text),this._w=this._fw||t.measureText(this.text).width),this.height=this._fs+(this._s.length-1)*this._fs*this.lineHeight,this._uw()}draw(){let t=0,e=this.textAlign,i=this.context;e=this.textAlign||("rtl"==i.canvas.dir?"right":"left"),t="right"==e?this.width:"center"==e?this.width/2|0:0,this._s.map(((s,n)=>{i.textBaseline="top",i.textAlign=e,i.fillStyle=this.color,i.font=this.font,i.fillText(s,t,this._fs*this.lineHeight*n)}))}}function y(){return new f(...arguments)}let m=new WeakMap,A={},x={},_={0:"left",1:"middle",2:"right"};function S(t,e){let{x:i,y:s,width:n,height:h}=(t=>{let{x:e=0,y:i=0,width:s,height:n}=t.world||t;return t.mapwidth&&(s=t.mapwidth,n=t.mapheight),t.anchor&&(e-=s*t.anchor.x,i-=n*t.anchor.y),0>s&&(e+=s,s*=-1),0>n&&(i+=n,n*=-1),{x:e,y:i,width:s,height:n}})(t);do{i-=t.sx||0,s-=t.sy||0}while(t=t.parent);let a=e.x-Math.max(i,Math.min(e.x,i+n)),o=e.y-Math.max(s,Math.min(e.y,s+h));return a*a+o*o<e.radius*e.radius}function b(t,e){return parseFloat(t.getPropertyValue(e))||0}function E(t){let e=null!=t.button?_[t.button]:"left";x[e]=!0,C(t,"onDown")}function I(t){let e=null!=t.button?_[t.button]:"left";x[e]=!1,C(t,"onUp")}function M(t){C(t,"onOver")}function v(t){m.get(t.target)._oo=null,x={}}function B(t,e,i){let s=(t=>{let e=t._lf.length?t._lf:t._cf;for(let i=e.length-1;i>=0;i--){let s=e[i];if(s.collidesWithPointer?s.collidesWithPointer(t):S(s,t))return s}})(t);s&&s[e]&&s[e](i),A[e]&&A[e](i,s),"onOver"==e&&(s!=t._oo&&t._oo&&t._oo.onOut&&t._oo.onOut(i),t._oo=s)}function C(t,e){t.preventDefault();let i=t.target,s=m.get(i),{scaleX:h,scaleY:a,offsetX:o,offsetY:r}=(t=>{let{canvas:e,_s:i}=t,s=e.getBoundingClientRect(),n="none"!=i.transform?i.transform.replace("matrix(","").split(","):[1,1,1,1],h=parseFloat(n[0]),a=parseFloat(n[3]),o=(b(i,"border-left-width")+b(i,"border-right-width"))*h,r=(b(i,"border-top-width")+b(i,"border-bottom-width"))*a,c=(b(i,"padding-left")+b(i,"padding-right"))*h,d=(b(i,"padding-top")+b(i,"padding-bottom"))*a;return{scaleX:(s.width-o-c)/e.width,scaleY:(s.height-r-d)/e.height,offsetX:s.left+(b(i,"border-left-width")+b(i,"padding-left"))*h,offsetY:s.top+(b(i,"border-top-width")+b(i,"padding-top"))*a}})(s);t.type.includes("touch")?(Array.from(t.touches).map((({clientX:t,clientY:e,identifier:i})=>{let n=s.touches[i];n||(n=s.touches[i]={start:{x:(t-o)/h,y:(e-r)/a}},s.touches.length++),n.changed=!1})),Array.from(t.changedTouches).map((({clientX:i,clientY:c,identifier:d})=>{let l=s.touches[d];l.changed=!0,l.x=s.x=(i-o)/h,l.y=s.y=(c-r)/a,B(s,e,t),n("touchChanged",t,s.touches),"onUp"==e&&(delete s.touches[d],s.touches.length--,s.touches.length||n("touchEnd"))}))):(s.x=(t.clientX-o)/h,s.y=(t.clientY-r)/a,B(s,e,t))}function R(t){let e=t.canvas;t.clearRect(0,0,e.width,e.height)}let D={},Q={},Y={},k={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"arrowleft",ArrowUp:"arrowup",ArrowRight:"arrowright",ArrowDown:"arrowdown"};function O(t=i,e){t._pd&&e.preventDefault(),t(e)}function U(t){let e=k[t.code],i=D[e];Y[e]=!0,O(i,t)}function G(t){let e=k[t.code],i=Q[e];Y[e]=!1,O(i,t)}function T(){Y={}}function K(t){if(+t==t)return t;let e=[],i=t.split(".."),s=+i[0],n=+i[1],h=s;if(n>s)for(;n>=h;h++)e.push(h);else for(;h>=n;h--)e.push(h);return e}class F{constructor({image:t,frameWidth:e,frameHeight:i,frameMargin:s,animations:n}={}){if(!t)throw Error("You must provide an Image for the SpriteSheet");this.animations={},this.image=t,this.frame={width:e,height:i,margin:s},this._f=t.width/e|0,this.createAnimations(n)}createAnimations(t){let e,i;for(i in t){let{frames:s,frameRate:n,loop:h}=t[i];if(e=[],null==s)throw Error("Animation "+i+" must provide a frames property");[].concat(s).map((t=>{e=e.concat(K(t))})),this.animations[i]=c({spriteSheet:this,frames:e,frameRate:n,loop:h})}}}function H(){return new F(...arguments)}const L={money:0,highScore:0,purchases:{}};function j(){const t=JSON.parse(window.localStorage.getItem("js13k22-unseen-stats")||JSON.stringify(L));return console.log("GOT STATS",t),t}function N(t){const e=j();e.money=t?.money||e.money,e.highScore=t.highScore&&t.highScore>e.highScore?t.highScore:e.highScore,t.purchases&&(e.purchases={...e.purchases,...t.purchases}),console.log("SETTING STATS",e),window.localStorage.setItem("js13k22-unseen-stats",JSON.stringify(e))}class P extends p{constructor(t){super(t),this.enabled=!1===t.enabled||!0}}let{canvas:W,context:X}=((i,{contextless:s=!1}={})=>{if(t=document.getElementById(i)||i||document.querySelector("canvas"),s&&(t=t||new Proxy({},h)),!t)throw Error("You must provide a canvas element for the game");return e=t.getContext("2d")||new Proxy({},h),e.imageSmoothingEnabled=!1,n("init"),{canvas:t,context:e}})();function J(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function V(t,e,i,s=0){if(!t.enabled||!e.enabled)return!1;const n=i?.75:0,h=e.x>t.x+t.width+s,a=e.x+e.width<t.x-s+t.width*n;if(h||a)return!1;const o=e.y+e.height<t.y-s,r=e.y>t.y+t.height+s;return!o&&!r}function q(){let t=W.width;const e=W.height,i=-t/250,s=t/250;return W.width=t,W.height=e,{playing:!1,menuing:!0,ending:!1,shopping:!1,ratio:1,width:t,height:e,maxDyUp:i,maxDyDown:s,maxDyUpChange:Math.abs(.05*i),maxDyDownChange:Math.abs(.05*i),objectives:[],obstacles:[],birdStartX:300,birdStartY:e/2,birdStartDy:-12,distance:1,pickups:0,canvas:W,context:X,baseSpeed:-7,scrollSpeed:-3,font:"32px Arial",maxY:e-30,minY:30,taper:.05,lastObstacleSpawn:0,canSpawnObstacle:!1,hitboxOffset:30,powerups:{life:0,money:0,agile:!1,sabotage:!1}}}let Z={...q(),setPlaying(){},setEnding(){},setMenuing(){},setShopping(){}};function z(){const t=j();Z={...q(),setPlaying(){console.log("SIP"),Z.playing=!0,Z.ending=!1,Z.menuing=!1,Z.shopping=!1},setEnding(){Z.playing=!1,Z.ending=!0,Z.menuing=!1,Z.shopping=!1},setMenuing(){Z.playing=!1,Z.ending=!1,Z.menuing=!0,Z.shopping=!1},setShopping(){Z.playing=!1,Z.ending=!1,Z.menuing=!1,Z.shopping=!0}},t.purchases.neck&&(Z.powerups.life+=1),t.purchases.steel&&(Z.powerups.life+=2),t.purchases.money&&(Z.powerups.money=20),t.purchases.sabotage&&(console.log("GLASS!"),Z.powerups.sabotage=!0),t.purchases.agile&&(console.log("AGILE!"),Z.powerups.agile=!0,Z.maxDyUp=-Z.width/150,Z.maxDyDown=Z.width/150,Z.maxDyUpChange=Math.abs(.025*Z.maxDyUp),Z.maxDyDownChange=Math.abs(.025*Z.maxDyUp),Z.birdStartDy=-10)}z();const $=[];let tt,et,it,st,nt,ht;const at=Z.birdStartX;function ot(t,e){return new P({x:t,y:e,width:30,height:14,dy:0,dx:Z.scrollSpeed,image:st,enabled:!0})}class rt{constructor(t,e,i){this.fn=t,this.yMin=e,this.yMax=i}function(t){const e=t||J(this.yMin,this.yMax);return t=>this.fn(t,e)}}const ct=new rt(((t,e)=>e*Z.ratio+100*Z.ratio*Math.sin(1*Math.PI*t+3)),50,750),dt=new rt(((t,e)=>e*Z.ratio+150*Z.ratio*Math.sin(1*Math.PI*t+3)),50,750),lt=new rt(((t,e)=>e*Z.ratio-25*Z.ratio*Math.sin(2.5*Math.PI*t*.1+3)),100,700),gt=new rt(((t,e)=>e*Z.ratio+115*Z.ratio*Math.sin(.1*Math.PI*t+3)),170,610),ut=new rt(((t,e)=>e*Z.ratio+100*Z.ratio*Math.sin(.125*Math.PI*t+0)),300,490),pt=new rt(((t,e)=>e*Z.ratio+150*Z.ratio*Math.sin(.04*Math.PI*t+3)),170,740),wt=new rt(((t,e)=>e*Z.ratio+150*Z.ratio*Math.sin(2.952*Math.PI*t+0)),170,610),ft=new rt(((t,e)=>e*Z.ratio+50*Z.ratio*Math.sin(2.94*Math.PI*t+0)),70,710),yt=[ct,dt,lt,gt,ut,pt,wt,ft];function mt(t,e){const i=t||1.25*Z.width,s=.5>Math.random()?21:26;let n=yt[J(0,yt.length-1)].function();for(let h=0;s>h;h+=1){const t=i+60*h,s=e?e(h):n(h);Z.objectives.push(ot(t,s))}}const At=Z.height-155-20*Z.ratio,xt=20*Z.ratio;function _t(t,e){const i=new P({x:t,y:e,width:45,height:155,dy:0,dx:Z.scrollSpeed,animations:ht?.animations,enabled:!0});return i?i.playAnimation("whole"):console.log("S not found O.o",i),i}const St=new AudioContext;function bt(...t){return((...t)=>{const e=St.createBuffer(t.length,t[0].length,44100),i=St.createBufferSource();return t.map(((t,i)=>e.getChannelData(i).set(t))),i.buffer=e,i.connect(St.destination),i.start(),i})(((t=1,e=.05,i=220,s=0,n=0,h=.1,a=0,o=1,r=0,c=0,d=0,l=0,g=0,u=0,p=0,w=0,f=0,y=1,m=0,A=0)=>{const x=2*Math.PI;let _,S,b=44100,E=r*=500*x/b/b,I=i*=(1+2*e*Math.random()-e)*x/b,M=[],v=0,B=0,C=0,R=1,D=0,Q=0,Y=0;for(c*=500*x/b**3,p*=x/b,d*=x/b,l*=b,g=g*b|0,S=(s=s*b+9)+(m*=b)+(n*=b)+(h*=b)+(f*=b)|0;S>C;M[C++]=Y)++Q%(100*w|0)||(Y=a?a>1?a>2?a>3?Math.sin((v%x)**3):Math.max(Math.min(Math.tan(v),1),-1):1-(2*v/x%2+2)%2:1-4*Math.abs(Math.round(v/x)-v/x):Math.sin(v),Y=(g?1-A+A*Math.sin(x*C/g):1)*(Y>0?1:-1)*Math.abs(Y)**o*t*.3*(s>C?C/s:s+m>C?1-(C-s)/m*(1-y):s+m+n>C?y:S-f>C?(S-C-f)/h*y:0),Y=f?Y/2+(f>C?0:(S-f>C?1:(S-C)/f)*M[C-f|0]/2):Y),_=(i+=r+=c)*Math.cos(p*B++),v+=_-_*u*(1-1e9*(Math.sin(C)+1)%2),R&&++R>l&&(i+=d,I+=d,R=0),!g||++D%g||(i=I,r=E,R=R||1);return M})(...t))}class Et{constructor(t,e,i,s,n){this.id=t,this.title=e,this.desc=i,this.cost=s,this.purchased=n}}const It=[new Et("neck","Neck Brace","Adds 1 extra life per round!",100,!1),new Et("steel","Steel Tipped Beak","Adds 2 extra lives per round!",200,!1),new Et("money","Money Magnet","Much larger pickup radius!",500,!1),new Et("agile","Agility Training","Better, stronger, faster! More responsive bird.",800,!1),new Et("sabotage","Sabotage Glass Supply","Easy-break glass! 50% chance to avoid death.",1500,!1)];function Mt(){console.log("dollarImg",st);const t=document.getElementById("available");if(t){const e=j().money;t.innerHTML=`You have ${e} <span id="available-img"></span> available!`,document.getElementById("available-img")?.appendChild(st.cloneNode())}}const vt=()=>bt(...[.5,,150,,.08,.13,4,2.84,.1,,,,.07,1.7,,.1,.09,.8,.08,.2]);let Bt,Ct;function Rt(){const t=document.getElementById("wrapper");t&&(t.style.maxWidth=`${Z.canvas.offsetWidth}px`,t.style.minWidth=`${Z.canvas.offsetWidth}px`,t.style.height=`${Z.canvas.offsetHeight}px`,t.style.left=`${Z.canvas.offsetLeft}`,t.style.top=`${Z.canvas.offsetTop}px`);let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}function Dt(t,e,i="block"){const s=document.getElementById(t);s&&(s.style.display=e?i:"none")}function Qt(t){Object.keys(t).forEach((e=>{"y"===e?(et.y=t.y-Z.hitboxOffset,tt.y=t.y):(et[e]=t[e],tt[e]=t[e])}))}window.addEventListener("resize",(()=>{Rt()})),Rt(),(()=>{const t=document.getElementById("playBtn"),e=document.getElementById("shopBtn");t?.addEventListener("click",(()=>{Dt("wrapper",!1),Dt("store",!1),z(),Qt({x:Z.birdStartX,y:Z.birdStartY,dy:Z.birdStartDy,dx:0}),et.playAnimation("fly"),Z.setPlaying(),Ft.start(),mt(1.5*Z.width,ct.function(390)),(()=>{const t=Z.width,e=Z.height/2+77.5,i=1.35*Z.width,s=Z.height/2-232.5;Z.obstacles.push(_t(t,e)),Z.obstacles.push(_t(i,s))})(),Bt=ot(25,54),Ct=new P({image:it,x:25,y:76,width:30,height:14,enabled:!0})})),e?.addEventListener("click",(()=>{Z.setShopping(),Z.context.clearRect(0,0,Z.canvas.width,Z.canvas.height),Dt("store",!0,"flex"),Mt()}))})(),(()=>{let t;for(t=0;26>t;t++)k["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;10>t;t++)k["Digit"+t]=k["Numpad"+t]=""+t;window.addEventListener("keydown",U),window.addEventListener("keyup",G),window.addEventListener("blur",T)})(),(({radius:t=5,canvas:e=a()}={})=>{let i=m.get(e);if(!i){let s=window.getComputedStyle(e);i={x:0,y:0,radius:t,touches:{length:0},canvas:e,_cf:[],_lf:[],_o:[],_oo:null,_s:s},m.set(e,i)}var n;e.addEventListener("mousedown",E),e.addEventListener("touchstart",E),e.addEventListener("mouseup",I),e.addEventListener("touchend",I),e.addEventListener("touchcancel",I),e.addEventListener("blur",v),e.addEventListener("mousemove",M),e.addEventListener("touchmove",M),i._t||(i._t=!0,n=()=>{i._lf.length=0,i._cf.map((t=>{i._lf.push(t)})),i._cf.length=0},s.tick=s.tick||[],s.tick.push(n))})();const Yt=y({text:"",font:`${Z.font}`,color:"white",x:20,y:20,textAlign:"left",anchor:{x:0,y:0}}),kt=y({text:"",font:"20px Arial",color:"white",x:60,y:52,textAlign:"left",anchor:{x:0,y:0}}),Ot=y({text:"0",font:"20px Arial",color:"white",x:60,y:75,textAlign:"left",anchor:{x:0,y:0}});function Ut(t){return V(tt,t,!1,Z.powerups.money)}function Gt(t){return Z.playing&&V(tt,t,!0,-2)}function Tt(t){t.playAnimation("break"),Z.powerups.sabotage&&J(0,9)>=5?(console.log("Not today!"),vt(),t.enabled=!1):Z.powerups.life>0?(console.log("Oh, ouch!"),Z.powerups.life-=1,t.enabled=!1,vt()):(console.log("Ahh dangit!"),Z.setEnding(),Qt({dx:Z.scrollSpeed/5}),et.playAnimation("hit"),bt(...[.5,0,222,.02,.1,.11,4,.45,-1.5,,,,,2,,.2,,.61,.2,.11]))}let Kt=0;let Ft=function({fps:t=60,clearCanvas:e=!0,update:s=i,render:h,context:a=o(),blur:r=!1}={}){if(!h)throw Error("You must provide a render() function");let c,d,l,g,u,p=0,w=1e3/t,f=1/t,y=e?R:i,m=!0;function A(){if(d=requestAnimationFrame(A),m&&(l=performance.now(),g=l-c,c=l,1e3>=g)){for(n("tick"),p+=g;p>=w;)u.update(f),p-=w;y(a),u.render()}}return r||(window.addEventListener("focus",(()=>{m=!0})),window.addEventListener("blur",(()=>{m=!1}))),u={update:s,render:h,isStopped:!0,start(){c=performance.now(),this.isStopped=!1,requestAnimationFrame(A)},stop(){this.isStopped=!0,cancelAnimationFrame(d)},_frame:A,set _last(t){c=t}},u}({update(){Z.playing?(Z.scrollSpeed=Z.baseSpeed+Z.baseSpeed*(Z.distance/5e3),Z.distance+=1):Z.ending&&(0>Z.scrollSpeed&&(Z.scrollSpeed=Math.min(Z.scrollSpeed+Z.taper,0)),tt.dx>0&&Qt({dx:Math.max(tt.dx-Z.taper,0)})),(Z.playing||Z.ending)&&((()=>{for(let t=0;t<Z.objectives.length;t+=1){const e=Z.objectives[t];e.x<0-e.width?(Z.objectives.splice(t,1),t-=1):Ut(e)?(Z.pickups+=1,Z.objectives.splice(t,1),t-=1,bt(...[.25,,4,.01,,.09,1,1.39,-41,-1.7,,,,,3,,.01,.41,.04])):(e.dx!==Z.scrollSpeed&&(e.dx=Z.scrollSpeed),e.update())}Z.objectives.length&&Z.objectives.at(-1).x<Z.width&&mt()})(),(()=>{for(let t=0;t<Z.obstacles.length;t+=1){const e=Z.obstacles[t];e.x<0-e.width?(Z.obstacles.splice(t,1),t-=1):(Gt(e)&&Tt(e),e.dx!==Z.scrollSpeed&&(e.dx=Z.scrollSpeed),e.update())}Z.distance-Z.lastObstacleSpawn>50&&Z.distance%25==0&&(Z.canSpawnObstacle=!0),Z.canSpawnObstacle&&40===J(1,40)&&(Z.canSpawnObstacle=!1,Z.lastObstacleSpawn=Z.distance,(()=>{let t=_t(Z.width+180*Z.ratio,J(xt,At));Z.objectives.forEach((e=>{if(V(e,t,!1,.5*e.width*Z.ratio))for(;V(e,t,!1,.5*e.width*Z.ratio);)t.y-=20*Z.ratio,t.y<xt&&(t.y=At)})),Z.obstacles.push(t)})())})(),(Y.space||x.left||((t=a())=>m.get(t))().touches.length>0)&&tt.dy>Z.maxDyUp&&(Z.playing||tt.dx>2)?Qt({dy:tt.dy-Z.maxDyUpChange}):tt.dy<Z.maxDyDown&&Qt({dy:tt.dy+Z.maxDyDownChange}),tt.y>Z.maxY?Qt({y:Z.maxY,dy:0}):tt.y<Z.minY&&Qt({y:Z.minY,dy:0}),0>tt.dx?tt.dx+=.011:(tt.dx=0,tt.x=Math.round(tt.x)),Z.ending&&tt.y===Z.maxY&&(()=>{const t=j();et.playAnimation("stop"),bt(...[1,0,5,,.28,.07,2,.17,,,,,.01,.4,,.9,.15,.24,.07,.05]),N({money:t.money+Z.pickups,highScore:Z.distance}),Dt("wrapper",!0),Z.setMenuing()})(),Z.playing&&(20===Kt?(bt(...[.05,,562,.04,,.07,4,.26,6.4,,88,.22,,,4.8,.2,,.26,.01]),Kt=0):Kt+=1),tt.update(),et.update()),Z.menuing},render(){Z.shopping||(et.render(),Z.objectives.forEach((t=>{t.render()})),Z.obstacles.forEach((t=>{t.render()})),tt.render(),Yt.text=`${String(Z.distance).padStart(5,"0")}m`,kt.text=`${Z.pickups}`,Ot.text=Z.powerups.life.toString(),Yt.render(),kt.render(),Bt.render(),Ot.render(),Ct.render())}});(()=>{console.log("SETUP STORE! Do not call this more than once...");const t=document.getElementById("items"),e=document.getElementById("buy");if(document.createElement("img"),t&&e){e.addEventListener("click",(t=>{const i=j(),s=t.target.getAttribute("data-id")||"",n=It.filter((t=>t.id===s))[0],h=document.getElementById(s);if(i.money>=n.cost&&!i.purchases[s]){if(N({money:i.money-n.cost,purchases:{[n.id]:n.id}}),h){h.classList.add("owned");const t=h.cloneNode(!0);h.parentNode?.replaceChild(t,h),e.innerHTML=`${n.desc} You already own this!`,e.setAttribute("data-id",n.id),t.addEventListener("click",(()=>{e.innerHTML=`${n.desc} You already own this!`,e.setAttribute("data-id",n.id)}))}Mt()}}));const i=j();It.forEach((s=>{const n=i.purchases[s.id],h=document.createElement("button");h.classList.add("item"),h.innerHTML=s.title,n&&h.classList.add("owned"),h.addEventListener("click",(()=>{e.setAttribute("data-id",s.id),n?e.innerHTML=`${s.desc} You already own this!`:(e.innerHTML=`${s.desc} Click here to buy for ${s.cost}`,e.appendChild(st)),h.id=s.id,h.style.border="1px #fff solid"})),t.appendChild(h)}))}})(),(t=>{function e(t){$.push(t),$.length}tt=new P({x:Z.birdStartX,y:Z.birdStartY,width:65,height:65/4,dy:Z.birdStartDy,enabled:!0});const i=new Image;i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAooAAABBCAMAAABhGnXgAAAACVBMVEX///8AAAD///9+749PAAAAA3RSTlP//wDXyg1BAAADxklEQVR42u2dgW6jMBBEn/3/H92gJLdtwFnMXMByZoQq1dVOB+/DDZASqmUNIdYjPDdjal2JIqXE9gKn2bTOQ5HySzyGeMJpFq2zUKT8ES9jXhitk1Ck/BWvY379aF2DYuE+5nXRuh5FXga8LlpjoFh86mJdgmLBKFpjoFiMomUULV9XNIrWgCgWOkmE6jvYVnBwEYrw7z4h4f2IZDynlc6BjuKqnPWdGSrLMBQvltNK54DawWKK4ja2ECN+rTmLZA4EFFMS2Y6AT3smls5BjmKInSA1LodTfBd7Yukc5CiGEFC8O/rdPV+PYsKBimJazDLoK5NfIJ0DEhsRxYJJNIoZBzmKIVrlea1RNIqLRBRD7EXRN7GthAMRxcJhFAtG0SjexAkoZsW+sGgWFyGhGOI4igWTaBRTDkhsQhxHsXAMRSrcv9zkhwKcp7wLIgc6iscz0I8iFZZfy70EFptqHE+Q0IWcAx3FgoBiHBB0TEEU8/wG36w5RXkXZA4UFAFqrQB0ZogdIQySKWgdTyQGuWxQP9AFlQP2uUDoMZBm6DcIsWGTGCQCbPDBLugc8D5AVK0E7QiCQbYjK4NEqwAgGhTVgHJ5AsQufIIDGgdDuzJ2BaCRQTHIz8Fyg2iAbrASOw1oGKAn0AyQu/AJDkhW5kywGUEwaE1Cs7HtXdgK0WPAduL9Bg1xQgJhDoQuKByQJEiqtwyAwwaRgFd1GjTmvNBhkICQGeQo6gn0OdC7oHPQdhAoHsyAdVWPwWYQdhvQSq4mUOdgyDaSvLTJ/6wObQCvTaDPoEVCbpCgqCUQ52DINlIr70o3BFBDgxvwe6PQYdCkidwgYVFOIM3BmG2kJpXpejy6AcRGtwENy8IuA9qZ9ATCHIzYRuiqT66Iw3QGtPBgjwFNvNATMFkXaFxHT+pD/OF8PgPegJAbkKAoJZisC5XgMPgE9p8pxY9nM0hByA1IUFQSzNUFmvfFSTgORf2MBm0S2GVAgqKUYKYu8M45JPxr9oUG/8mAJgi5IFkWtQQzdYGPP1FqAoMDIIQSFLUEM3WB+lHBDAYoIFQSFJUEE3XB784/BBOlC6UMRT3B+DKKRtEoGsWURaNoFKuOIpejiFH0EwNvoqKjKCQAKkbRj/Qthb6ZQ0exsjoSjOJXCulpK/qyGAkCxWoUv1HwYIGrUIwERvHbdWehUg6cMaCjGAkwitbxT41DQnGdoBpFS74e5If/GMWrUfTn1xjFEYRRNIpjCH+QklEcRHhNNIpjCK+JRnGkGzbLZhKN4rWCZcOPt2/oByhuH7Wcf88VAAAAAElFTkSuQmCC",i.width=650,i.height=65,i.onload=()=>{let t=H({image:i,frameWidth:65,frameHeight:65,animations:{fly:{frames:"0..9",frameRate:30},stop:{frames:"3"},hit:{frames:"0"}}});et=new P({x:at,y:tt.y-Z.hitboxOffset,animations:t.animations,enabled:!0}),e(i)},st=new Image,st.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAOAQAAAAAQnZGUAAAALklEQVR4AWP4////H4YHDAwyEKKBvYGFoYHDAUgIKAAJYQgB5kIkwEoQOsAGAACN+RJn1qrzCgAAAABJRU5ErkJggg==",st.width=30,st.height=14,st.onload=()=>{e(st)},it=new Image,it.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAOCAYAAAA45qw5AAAAWUlEQVR4Ab2SgQaAQBQE5/9/ukRgylXbesPA4c3iALYD4LUn/BEdGw37aBBNw1Iswlei8FceRrMSHUqMBtAO+d2Uw8HAqZBhIMadDHyoflgoWA4LUgmCNNwBzMdwutSvVBcAAAAASUVORK5CYII=",it.width=30,it.height=14,it.onload=()=>{e(it)},nt=new Image,nt.src="data:image/png;base64,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",nt.width=270,nt.height=155,nt.onload=()=>{ht=H({frameWidth:45,frameHeight:155,animations:{break:{frames:"0..5",frameRate:30,loop:!1},whole:{frames:"0",frameRate:1}},image:nt}),e(nt)}})();
